<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
  <script src="../scripts/user_scripts.js"></script>
<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">

<script>
  
  function isNumeric(n) {
    return !isNaN(parseFloat(n)) && isFinite(n);
  }
  
  function fireComplete() {
    var form = document.getElementById("survey-form");
    
    var policy = $('input[name=policy]:checked').val();
    var age = $('input[name=age]').val();
    var gender = $('input[name=gender]:checked').val();
    var gendertext = $('input[name=gendertext]').val();
    
    if (policy === undefined || age === undefined || gender === undefined)  {
      alert("Please answer each question."); 
    } 
    else if (age < 18 || age > 110 || !isNumeric(age)) {
      alert("Please enter a valid age.");
    }
    else {
        postToSheet("final-survey", "N/A", JSON.stringify([{"policy":policy},{"age":age},{"gender":gender},{"gendertext":gendertext}]));
  
        setTimeout(function() {
          window.location.replace('../pages/post-exercise.html');
        }, 50);
    }
  }
</script>
  
<script>
function deleteInputContents() {
  document.getElementById("genderInput").value = ""; 
}
</script>
  
</head>
<body>
  
<div id="header" style="padding-left: 40px; padding-top: 40px">
  <div id="headerText1">Please answer the following to help us better understand your comment. <br> 
  These will <b>NOT</b> be connected to your worker ID at any point during our analysis.</div>
</div>
<div style="padding-left: 40px">
<form id="survey-form">
    <br>
  <div class="policy">
    <div id="question1"><strong>1. What is your political perspective?</strong></div>
    <input class="surveyRadioButton" type="radio" name="policy" value="-3"> Extremely liberal<br>
    <input class="surveyRadioButton" type="radio" name="policy" value="-2"> Liberal<br>
    <input class="surveyRadioButton" type="radio" name="policy" value="-1"> Slightly liberal <br> 
    <input class="surveyRadioButton" type="radio" name="policy" value="0"> Moderate, middle of the road <br>
    <input class="surveyRadioButton" type="radio" name="policy" value="1"> Slightly conservative <br>
    <input class="surveyRadioButton" type="radio" name="policy" value="2"> Conservative <br>
    <input class="surveyRadioButton" type="radio" name="policy" value="3"> Extremely conservative <br>
  </div>
    
    <br>
    <div class="age">
        <div id="question2"><strong>2. What is your age?</strong></div>
        <input type="text" pattern="[0-9]{2,3}" name="age" >

    </div>
    
    <br>
    <div class="gender">
        <div id="question3"><strong>3. What is your gender?</strong></div> 
            <input class="surveyRadioButton" type="radio" name="gender" value="Female" onclick="deleteInputContents()"> Female<br>
            <input class="surveyRadioButton" type="radio" name="gender" value="Male" onclick="deleteInputContents()"> Male<br>
            <input class="surveyRadioButton" type="radio" name="gender" value="Other"> Other <input id="genderInput" type="text" onfocus="$('input[name=gender]').prop('checked', true)" pattern = "[A-Za-z]{1,}" name="gendertext">

  </div>
  <br>
</form>

<button id="submit-button" onclick="fireComplete()">Submit</button>
</div>
	
</body>
</html>
